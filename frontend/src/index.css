@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* Markdown rendered in chat bubbles */
  .prose-chat { @apply font-sans break-words; }
  .prose-chat p { @apply my-1.5 leading-relaxed; }
  .prose-chat p:first-child { @apply mt-0; }
  .prose-chat p:last-child { @apply mb-0; }
  .prose-chat h1 { @apply text-base font-bold mt-3 mb-1; }
  .prose-chat h2 { @apply text-sm font-bold mt-3 mb-1; }
  .prose-chat h3 { @apply text-sm font-semibold mt-2 mb-1; }
  .prose-chat ul { @apply list-disc pl-5 my-1.5 space-y-0.5; }
  .prose-chat ol { @apply list-decimal pl-5 my-1.5 space-y-0.5; }
  .prose-chat li > p { @apply my-0; }
  .prose-chat strong { @apply font-semibold; }
  .prose-chat em { @apply italic; }
  .prose-chat a { @apply text-indigo-500 dark:text-indigo-400 underline underline-offset-2; }
  .prose-chat code { @apply font-mono text-xs bg-black/10 dark:bg-white/10 px-1 py-0.5 rounded; }
  .prose-chat pre { @apply font-mono text-xs bg-black/10 dark:bg-white/10 p-3 rounded-lg my-2 overflow-x-auto; }
  .prose-chat pre code { @apply bg-transparent p-0; }
  .prose-chat blockquote { @apply border-l-2 border-gray-300 dark:border-zinc-600 pl-3 italic text-gray-500 dark:text-zinc-400 my-2; }
  .prose-chat hr { @apply border-gray-200 dark:border-zinc-700 my-3; }
  .prose-chat table { @apply text-xs border-collapse my-2 w-full; }
  .prose-chat th { @apply border border-gray-200 dark:border-zinc-700 px-2 py-1 font-semibold bg-gray-50 dark:bg-zinc-800/50; }
  .prose-chat td { @apply border border-gray-200 dark:border-zinc-700 px-2 py-1; }
}

@layer base {
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    @apply bg-white text-gray-900 dark:bg-zinc-950 dark:text-zinc-100;
    -webkit-font-smoothing: antialiased;
  }

  #root {
    height: 100%;
  }

  ::-webkit-scrollbar {
    @apply w-1.5;
  }
  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-zinc-700 rounded-full;
  }
}

/* ── Code block chrome ─────────────────────────────────────────── */
.prose-chat pre.code-block {
  position: relative;
  padding: 2rem 1rem 0.75rem 1rem !important;
}

/* language badge (top-left) */
.prose-chat .code-lang {
  position: absolute;
  top: 7px;
  left: 10px;
  font-family: ui-monospace, monospace;
  font-size: 0.65rem;
  line-height: 1;
  opacity: 0.5;
  user-select: none;
  pointer-events: none;
  text-transform: lowercase;
}

/* copy button (top-right) */
.prose-chat .code-copy-btn {
  position: absolute;
  top: 6px;
  right: 8px;
  opacity: 0;
  transition: opacity 0.15s;
  padding: 5px;
  border-radius: 5px;
  background: rgba(63, 63, 63, 0.75);
  color: #d4d4d8;
  cursor: pointer;
  border: none;
  line-height: 0;
}
.prose-chat .code-copy-btn:hover { background: rgba(90, 90, 96, 0.9); }
.prose-chat .code-copy-btn.copied { background: rgba(34, 197, 94, 0.75); }
.prose-chat pre.code-block:hover .code-copy-btn { opacity: 1; }

/* ── highlight.js token colors ─────────────────────────────────── */
/* Light mode — GitHub Light inspired */
.prose-chat .hljs-keyword,
.prose-chat .hljs-selector-tag { color: #cf222e; }

.prose-chat .hljs-string,
.prose-chat .hljs-regexp,
.prose-chat .hljs-template-string { color: #0a3069; }

.prose-chat .hljs-comment,
.prose-chat .hljs-quote { color: #6e7781; font-style: italic; }

.prose-chat .hljs-number,
.prose-chat .hljs-literal { color: #0550ae; }

.prose-chat .hljs-function,
.prose-chat .hljs-title,
.prose-chat .hljs-title.class_ { color: #8250df; }

.prose-chat .hljs-built_in,
.prose-chat .hljs-type { color: #953800; }

.prose-chat .hljs-attr,
.prose-chat .hljs-attribute,
.prose-chat .hljs-variable,
.prose-chat .hljs-name { color: #116329; }

.prose-chat .hljs-tag { color: #116329; }
.prose-chat .hljs-operator { color: #cf222e; }

/* Dark mode — GitHub Dark inspired */
.dark .prose-chat .hljs-keyword,
.dark .prose-chat .hljs-selector-tag { color: #ff7b72; }

.dark .prose-chat .hljs-string,
.dark .prose-chat .hljs-regexp,
.dark .prose-chat .hljs-template-string { color: #a5d6ff; }

.dark .prose-chat .hljs-comment,
.dark .prose-chat .hljs-quote { color: #8b949e; font-style: italic; }

.dark .prose-chat .hljs-number,
.dark .prose-chat .hljs-literal { color: #79c0ff; }

.dark .prose-chat .hljs-function,
.dark .prose-chat .hljs-title,
.dark .prose-chat .hljs-title.class_ { color: #d2a8ff; }

.dark .prose-chat .hljs-built_in,
.dark .prose-chat .hljs-type { color: #ffa657; }

.dark .prose-chat .hljs-attr,
.dark .prose-chat .hljs-attribute,
.dark .prose-chat .hljs-variable,
.dark .prose-chat .hljs-name { color: #7ee787; }

.dark .prose-chat .hljs-tag { color: #7ee787; }
.dark .prose-chat .hljs-operator { color: #ff7b72; }
